<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Funding Models</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1, h2 {
            text-align: center;
            color: #333;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            width: 100%;
            max-width: 1200px;
            margin-top: 20px;
        }

        .section {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            flex: 1 1 300px; /* Allow sections to grow/shrink, base width 300px */
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        #idea-pool {
            background-color: #e9e9e9;
            min-height: 150px;
            justify-content: center;
            align-items: center;
            display: flex; /* Use flex to center ideas */
            flex-wrap: wrap;
            gap: 10px;
        }

        .research-zone {
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: 2px dashed transparent;
        }

        .research-zone:hover {
             border-color: #666;
        }

        #gov-zone {
            background-color: #d9e8f5; /* Light blue */
        }

        #private-zone {
            background-color: #f5e9d9; /* Light orange */
        }

        .output-area {
            min-height: 150px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
            margin-top: 10px;
            justify-content: center; /* Center output items */
        }

        .idea {
            width: 40px;
            height: 40px;
            border-radius: 50%; /* Default to circle */
            margin: 5px;
            cursor: pointer;
            transition: transform 0.2s ease, border 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px; /* Icon placeholder size */
            font-weight: bold;
            color: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .idea.selected {
            transform: scale(1.2);
            border: 3px solid #007bff; /* Highlight selected */
        }

        .idea[data-type="A"] { background-color: #4CAF50; } /* Green */
        .idea[data-type="B"] { background-color: #2196F3; } /* Blue */
        .idea[data-type="C"] { background-color: #FF9800; } /* Orange */
        .idea[data-type="D"] { background-color: #9C27B0; } /* Purple */
        .idea[data-type="E"] { background-color: #E91E63; } /* Pink */


        .output-item {
            padding: 5px 8px;
            border-radius: 4px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            text-align: center;
        }

        .gov-paper {
            background-color: #ccc;
            color: #333;
            min-width: 60px;
            height: 30px;
        }

        .gov-paper.problem {
            background-color: #f44336; /* Red */
            color: white;
            position: relative; /* For the X mark */
        }

         .gov-paper.problem::after {
            content: 'X';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            font-weight: bold;
         }


        .private-innovation {
            min-width: 40px;
            height: 40px;
            font-size: 18px;
            color: white;
            font-weight: bold;
        }

        .private-innovation[data-icon="üí°"] { background-color: #FFC107; } /* Lightbulb - Amber */
        .private-innovation[data-icon="üíª"] { background-color: #607D8B; } /* Chip - Blue Grey */
        .private-innovation[data-icon="üíâ"] { background-color: #00BCD4; } /* Vaccine - Cyan */
        .private-innovation[data-icon="üõ∞Ô∏è"] { background-color: #3F51B5; } /* Satellite - Indigo */
        .private-innovation[data-icon="üîã"] { background-color: #8BC34A; } /* Battery - Light Green */

        .private-fail {
            font-size: 12px;
            color: #666;
            opacity: 0.7;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                align-items: stretch;
            }
            .section {
                flex: 1 1 100%; /* Stack sections on small screens */
            }
             #idea-pool {
                 min-height: 100px; /* Adjust height for smaller screens */
             }
             .output-area {
                 justify-content: flex-start; /* Align output left on small screens */
             }
        }
    </style>
</head>
<body>

    <h1>Research Funding Models Simulation</h1>
    <p>Click an idea below, then click either "Government Research" or "Private Research" to assign it.</p>

    <div class="container">

        <div id="idea-pool" class="section">
            <h2>Incoming Ideas</h2>
            <p>Click an idea to select it.</p>
            <!-- Ideas will appear here -->
        </div>

        <div class="section research-zone" id="gov-zone">
            <h2>Government Research</h2>
            <p>Send selected idea here.<br/>(Focus: Publication)</p>
             <div class="output-area" id="gov-output">
                <h3>Government Publications</h3>
                <p style="font-size: 0.8em; color: #666;">(Problems Highlighted)</p>
                <!-- Government research outcomes appear here -->
            </div>
        </div>

        <div class="section research-zone" id="private-zone">
            <h2>Private Research</h2>
            <p>Send selected idea here.<br/>(Focus: Innovation)</p>
            <div class="output-area" id="private-output">
                <h3>Private Innovations</h3>
                 <p style="font-size: 0.8em; color: #666;">(Risky, Diverse Outcomes)</p>
                <!-- Private research outcomes appear here -->
            </div>
        </div>

    </div> <!-- end .container -->

    <script>
        const ideaPool = document.getElementById('idea-pool');
        const govZone = document.getElementById('gov-zone');
        const privateZone = document.getElementById('private-zone');
        const govOutput = document.getElementById('gov-output');
        const privateOutput = document.getElementById('private-output');

        let selectedIdeaElement = null;

        const ideaTypes = ['A', 'B', 'C', 'D', 'E']; // Represents different research areas/types
        const innovationIcons = { // Mapping idea types to potential innovation outcomes
            'A': 'üí°', // Lightbulb
            'B': 'üíª', // Computer Chip
            'C': 'üíâ', // Vaccine
            'D': 'üõ∞Ô∏è', // Satellite
            'E': 'üîã'  // Battery
        };

        // Probabilities
        const ideaGenerationInterval = 2000; // Time in ms between new ideas
        const govProblemChance = 0.55; // 55% chance of a problem paper
        const privateFailureChance = 0.45; // 45% chance of private research failure
        const outcomeDelay = 1500; // Time in ms before outcome (problem/innovation appears)

        function createIdea(type) {
            const idea = document.createElement('div');
            idea.classList.add('idea');
            idea.dataset.type = type;
            // idea.textContent = type; // Optional: show type letter
            idea.addEventListener('click', selectIdea);
            return idea;
        }

        function generateIdea() {
            const randomType = ideaTypes[Math.floor(Math.random() * ideaTypes.length)];
            const newIdea = createIdea(randomType);
            ideaPool.appendChild(newIdea);
        }

        function selectIdea(event) {
            if (selectedIdeaElement) {
                selectedIdeaElement.classList.remove('selected');
            }
            selectedIdeaElement = event.target;
            selectedIdeaElement.classList.add('selected');
        }

        function processIdea(zone) {
            if (!selectedIdeaElement) {
                console.log("No idea selected.");
                return;
            }

            const ideaType = selectedIdeaElement.dataset.type;
            const ideaElement = selectedIdeaElement; // Reference before removing

            // Remove from pool
            ideaElement.removeEventListener('click', selectIdea);
            ideaElement.remove();
            selectedIdeaElement = null; // Clear selection

            if (zone === 'gov') {
                processGovernmentResearch(ideaType);
            } else if (zone === 'private') {
                processPrivateResearch(ideaType, ideaElement);
            }
        }

        function processGovernmentResearch(ideaType) {
            // Create a placeholder paper immediately
            const paper = document.createElement('div');
            paper.classList.add('output-item', 'gov-paper');
            paper.textContent = 'Paper';
            govOutput.appendChild(paper);

            // After a delay, determine if it has a problem
            setTimeout(() => {
                const hasProblem = Math.random() < govProblemChance;
                // Note: Could add logic here to make problem chance based on ideaType,
                // but keeping it simple as per requirements (consistent chance per zone).
                if (hasProblem) {
                    paper.classList.add('problem');
                    // paper.textContent = 'Paper (X)'; // Alternative visual cue
                }
            }, outcomeDelay);
        }

        function processPrivateResearch(ideaType, ideaElement) {
             // Simulate risk/failure - briefly show idea then process
             // For simplicity, we already removed it from pool. Just process outcome directly.

            const failed = Math.random() < privateFailureChance;

            if (failed) {
                // Optional: Briefly show a "Failed" text where it would have gone
                // const failText = document.createElement('div');
                // failText.classList.add('private-fail');
                // failText.textContent = 'Fail';
                // privateOutput.appendChild(failText);
                // setTimeout(() => failText.remove(), outcomeDelay + 500); // Remove fail text after a bit
                console.log("Private research failed for idea type", ideaType);
                 // It just disappears/doesn't produce output
            } else {
                // Success - create an innovation
                const innovation = document.createElement('div');
                innovation.classList.add('output-item', 'private-innovation');
                const icon = innovationIcons[ideaType] || '‚ú®'; // Default icon if type not mapped
                innovation.textContent = icon;
                innovation.dataset.icon = icon; // Store icon for styling
                privateOutput.appendChild(innovation);
            }
        }

        // Event listeners for zones
        govZone.addEventListener('click', () => processIdea('gov'));
        privateZone.addEventListener('click', () => processIdea('private'));

        // Initial setup
        // Generate a few ideas to start
        setTimeout(generateIdea, 500);
        setTimeout(generateIdea, 1000);
        setTimeout(generateIdea, 1500);

        // Start generating ideas periodically
        setInterval(generateIdea, ideaGenerationInterval);

    </script>

</body>
</html>
