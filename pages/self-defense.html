<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî´ The Right to Bear Arms: A Self-Defense Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 50%, #2c3e50 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            font-weight: 300;
            text-shadow: 0 3px 15px rgba(0, 0, 0, 0.4);
        }

        .header .subtitle {
            font-size: 1.4em;
            opacity: 0.9;
            margin-bottom: 15px;
            font-style: italic;
            color: #ecf0f1;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.8;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
        }

        .newton-quote {
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid #e74c3c;
            padding: 25px;
            margin: 25px auto;
            max-width: 900px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            color: white;
            font-style: italic;
            font-size: 1.4em;
            line-height: 1.6;
        }

        .quote-attribution {
            text-align: right;
            margin-top: 15px;
            font-size: 1em;
            opacity: 0.9;
            color: #e74c3c;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            margin-bottom: 30px;
        }

        .simulation-area {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .controls-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            height: fit-content;
        }

        .section-title {
            color: #2c3e50;
            font-size: 1.4em;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
        }

        .scenario-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .scenario-button {
            padding: 15px;
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
        }

        .scenario-button.active {
            border-color: #e74c3c;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .scenario-button:hover:not(.active) {
            border-color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
        }

        .simulation-display {
            background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
            border-radius: 15px;
            height: 300px;
            position: relative;
            overflow: hidden;
            margin-bottom: 25px;
            border: 3px solid #34495e;
        }

        .environment {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(to top, #27ae60, #2ecc71);
        }

        .house {
            position: absolute;
            left: 30px;
            bottom: 60px;
            width: 100px;
            height: 120px;
            background: linear-gradient(135deg, #8b4513, #a0522d);
            border-radius: 8px 8px 0 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .house::before {
            content: '';
            position: absolute;
            top: -33px;
            left: -10px;
            right: -10px;
            height: 40px;
            background: linear-gradient(135deg, #654321, #8b4513);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }

        .house::after {
            content: 'üè†';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2em;
        }

        .citizen {
            position: absolute;
            left: 40px;
            bottom: 60px;
            width: 20px;
            height: 40px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 10px 10px 5px 5px;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .citizen::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 15px;
            background: #f4d03f;
            border-radius: 50%;
        }

        .citizen.armed::after {
            content: 'üî´';
            position: absolute;
            right: -20px;
            top: 10px;
            font-size: 1.2em;
        }

        .threat {
            position: absolute;
            right: 30px;
            bottom: 60px;
            width: 20px;
            height: 40px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border-radius: 10px 10px 5px 5px;
            transition: all 0.5s ease;
            z-index: 5;
        }

        .threat::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 15px;
            background: #2c3e50;
            border-radius: 50%;
        }

        .threat::after {
            content: 'üî™';
            position: absolute;
            right: -20px;
            top: 10px;
            font-size: 1.2em;
        }

        .threat.neutralized {
            transform: rotate(90deg);
            opacity: 0.5;
        }

        .police-car {
            position: absolute;
            right: -100px;
            bottom: 60px;
            width: 60px;
            height: 30px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 5px;
            transition: right 3s ease;
        }

        .police-car::before {
            content: 'üöî';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5em;
        }

        .police-car.arriving {
            right: 200px;
        }

        .status-display {
            background: rgba(52, 73, 94, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .status-text {
            font-size: 1.1em;
            font-weight: 600;
            text-align: center;
            color: #2c3e50;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .action-button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .action-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action-button.call-police {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .action-button.hide {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .action-button.defend {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }

        .action-button.negotiate {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
        }

        .action-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .timer-display {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .outcome-stats {
            margin-top: 20px;
            padding: 15px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .stat-label {
            font-weight: 600;
            color: #2c3e50;
        }

        .stat-value {
            font-weight: bold;
        }

        .success {
            color: #27ae60;
        }

        .failure {
            color: #e74c3c;
        }

        .warning {
            color: #f39c12;
        }

        .reset-button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reset-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .analysis-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            margin-top: 20px;
        }

        .analysis-section {
            margin-bottom: 25px;
        }

        .analysis-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-left: 4px solid #e74c3c;
            padding-left: 15px;
        }

        .analysis-section p {
            color: #34495e;
            line-height: 1.7;
            margin-bottom: 12px;
        }

        .highlight-box {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.05));
            border: 1px solid rgba(231, 76, 60, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .highlight-box h4 {
            color: #c0392b;
            margin-bottom: 10px;
        }

        .statistics-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .armed-stat {
            color: #27ae60;
        }

        .unarmed-stat {
            color: #e74c3c;
        }

        .philosophical-quote {
            background: rgba(52, 73, 94, 0.1);
            border-left: 4px solid #34495e;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            font-style: italic;
            color: #2c3e50;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .scenario-selector {
                grid-template-columns: 1fr;
            }

            .statistics-comparison {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2.2em;
            }
        }
    </style>
</head>

<body>
    <div class="app-container">
        <div class="header">
            <h1>The Right to Bear Arms</h1>
            <div class="subtitle">A Self-Defense Analysis</div>
            <p>Explore the fundamental right to self-defense through interactive scenarios that demonstrate the critical
                difference between armed and unarmed citizens facing immediate threats.</p>
        </div>

        <div class="newton-quote">
            "Any unarmed people are slaves, or are subject to slavery at any given moment."
            <div class="quote-attribution">‚Äî Huey P. Newton</div>
        </div>

        <div class="main-content">
            <div class="simulation-area">
                <h3 class="section-title">Interactive Self-Defense Scenario</h3>

                <div class="scenario-selector">
                    <div class="scenario-button active" id="unarmedScenario" onclick="selectScenario('unarmed')">
                        üö´ Unarmed Citizen
                    </div>
                    <div class="scenario-button" id="armedScenario" onclick="selectScenario('armed')">
                        üî´ Armed Citizen
                    </div>
                </div>

                <div class="simulation-display" id="simulationDisplay">
                    <div class="environment"></div>
                    <div class="house"></div>
                    <div class="citizen" id="citizen"></div>
                    <div class="threat" id="threat"></div>
                    <div class="police-car" id="policeCar"></div>
                </div>

                <div class="timer-display" id="timerDisplay">
                    Threat Distance: <span id="threatDistance">100</span>ft | Time: <span id="timeElapsed">0</span>s
                </div>

                <div class="status-display">
                    <div class="status-text" id="statusText">
                        A dangerous intruder has broken into your home at night. You have seconds to react. What do you
                        do?
                    </div>
                </div>

                <div class="action-buttons" id="actionButtons">
                    <button class="action-button call-police" onclick="callPolice()">üìû Call Police</button>
                    <button class="action-button hide" onclick="hideAndWait()">ü´• Hide & Wait</button>
                    <button class="action-button negotiate" onclick="tryNegotiation()">üó£Ô∏è Try to Negotiate</button>
                    <button class="action-button defend" onclick="defendYourself()" id="defendButton"
                        style="display: none;">üõ°Ô∏è Defend Yourself</button>
                </div>

                <div class="outcome-stats" id="outcomeStats" style="display: none;">
                    <div class="stat-row">
                        <span class="stat-label">Response Time:</span>
                        <span class="stat-value" id="responseTime">-</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Outcome:</span>
                        <span class="stat-value" id="outcome">-</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Survival Probability:</span>
                        <span class="stat-value" id="survivalRate">-</span>
                    </div>
                </div>

                <button class="reset-button" onclick="resetSimulation()" id="resetButton" style="display: none;">
                    üîÑ Try Different Scenario
                </button>
            </div>

            <div class="controls-panel">
                <h3 class="section-title">Scenario Parameters</h3>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Threat Level:</label>
                    <select id="threatLevel" onchange="updateThreatLevel()"
                        style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #bdc3c7;">
                        <option value="low">Burglar (Low Threat)</option>
                        <option value="medium" selected>Armed Intruder (Medium Threat)</option>
                        <option value="high">Multiple Attackers (High Threat)</option>
                    </select>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Location:</label>
                    <select id="location" onchange="updateLocation()"
                        style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #bdc3c7;">
                        <option value="home" selected>Home Invasion</option>
                        <option value="street">Street Mugging</option>
                        <option value="store">Store Robbery</option>
                    </select>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Police Response Time:</label>
                    <input type="range" id="responseTimeSlider" min="3" max="15" value="8"
                        onchange="updateResponseTime()" style="width: 100%;">
                    <div style="text-align: center; margin-top: 5px; color: #7f8c8d;">
                        <span id="responseTimeValue">8</span> minutes (US National Average)
                    </div>
                </div>

                <div class="highlight-box">
                    <h4>Key Statistics</h4>
                    <p><strong>Average US Police Response Time:</strong> 8-12 minutes</p>
                    <p><strong>Average Home Invasion:</strong> 90 seconds</p>
                    <p><strong>Armed Citizen Success Rate:</strong> 95%+</p>
                    <p><strong>Unarmed Victim Success Rate:</strong> 15-25%</p>
                </div>
            </div>
        </div>

        <div class="analysis-panel">
            <h3 class="section-title">Constitutional and Philosophical Analysis</h3>

            <div class="analysis-section">
                <h3>üß† The Philosophical Foundation of Self-Defense</h3>
                <p>
                    The right to self-defense is a principle of natural law, recognized by philosophers for centuries as
                    fundamental to
                    human existence. The English philosopher John Locke argued that self-preservation is the most basic
                    law of nature. When
                    an aggressor threatens one's life, they have, by their actions, created a state of war, and the
                    victim is justified in
                    defending themselves.
                </p>

                <div class="philosophical-quote">
                    "Laws that forbid the carrying of arms ... disarm only those who are neither inclined nor determined
                    to commit crimes.
                    Such laws make things worse for the assaulted and better for the assailants; they serve rather to
                    encourage than prevent
                    homicides, for an unarmed man may be attacked with greater confidence than an armed one."
                    <div style="text-align: right; margin-top: 10px; font-weight: bold;">‚Äî Cesare Beccaria</div>
                </div>
            </div>

            <div class="analysis-section">
                <h3>‚öñÔ∏è The Moral Imperative of Self-Defense</h3>
                <p>
                    Self-defense is not merely a legal right‚Äîit is a moral imperative. Every individual has the inherent
                    right to protect their life, liberty, and property from those who would take them by force. As the
                    great economist and philosopher Murray Rothbard would argue, "The right to self-defense is the most
                    fundamental of all rights, for without it, no other rights can be secured."
                </p>

                <p>
                    When governments restrict access to effective means of self-defense, they create a moral hazard:
                    law-abiding citizens become vulnerable to criminals who, by definition, do not respect laws. This
                    asymmetry of power fundamentally undermines the social contract and individual liberty.
                </p>
            </div>

            <div class="analysis-section">
                <h3>üìä The Reality of Armed vs. Unarmed Defense</h3>
                <div class="statistics-comparison">
                    <div class="stat-card">
                        <h4>Armed Citizens</h4>
                        <div class="stat-number armed-stat">95%</div>
                        <p>Successfully stop attackers without firing a shot in most cases</p>
                    </div>
                    <div class="stat-card">
                        <h4>Unarmed Victims</h4>
                        <div class="stat-number unarmed-stat">25%</div>
                        <p>Escape or survive violent encounters without serious injury</p>
                    </div>
                </div>

                <p>
                    Criminological studies from various countries consistently show
                    that victims who resist with a
                    firearm are less likely
                    to be injured than those who submit or resist without a weapon. While much of such data comes from
                    U.S. sources, the principles involved‚Äîdeterrence,
                    survival likelihood, and empowerment‚Äîare universal. Similar trends have been noted in countries with
                    permissive
                    self-defense laws, such as Switzerland or the Czech Republic.
                </p>
            </div>

            <div class="analysis-section">
                <h3>üöî The Police Response Reality</h3>
                <p>
                    While law enforcement serves a vital role in society, the reality is that police cannot be
                    everywhere at once. The average police response time in the United States is 8-12 minutes for
                    priority calls, but violent crimes often unfold in seconds or minutes; even Japan's average police
                    response time of 2-3 minutes is not enough to save most people from these situations. As the
                    saying goes, "When
                    seconds count, the police are minutes away."
                </p>

                <div class="highlight-box">
                    <h4>Legal Precedents</h4>
                    <p>The U.S. Supreme Court has ruled multiple times (Warren v. District of Columbia, Castle Rock v.
                        Gonzales) that police have no constitutional duty to protect individual citizens. Similarly,
                        countries such as Australia (Sullivan v. Moody), or the United Kingdom (Hill v. Chief Constable
                        of West Yorkshire) also have law enforcement systems with no positive duty towards civilians in
                        all cases. This places
                        the responsibility for personal protection squarely on the individual.</p>
                </div>
            </div>

            <div class="analysis-section">
                <h3>üóΩ Liberty and Personal Responsibility</h3>
                <p>
                    The right to bear arms embodies the principle that free citizens must be capable of defending
                    themselves, their families, and their communities. This right serves as both a practical tool for
                    self-defense and a philosophical statement about the relationship between the individual and the
                    State.
                </p>

                <p>
                    As Benjamin Franklin observed, "Those who would give up essential Liberty, to purchase a little
                    temporary Safety, deserve neither Liberty nor Safety." The right to keep and bear arms is essential
                    to maintaining both liberty and safety in a free society.
                </p>

                <div class="philosophical-quote">
                    "The right of the citizens to keep and bear arms has justly been considered as the palladium of the
                    liberties of a republic; since it offers a strong moral check against the usurpation and arbitrary
                    power of rulers."
                    <div style="text-align: right; margin-top: 10px; font-weight: bold;">‚Äî Joseph Story, Supreme Court
                        Justice</div>
                </div>
            </div>

            <div class="analysis-section">
                <h3>üéØ Conclusion: The Equalizer Effect</h3>
                <p>
                    Firearms serve as "the great equalizer"‚Äîthey enable anybody, regardless of age, identity, status or
                    physical
                    ability, to defend themselves from an attacker. They empower the elderly to protect themselves
                    from young criminals, women to defend against male attackers, and marginalized individuals to defend
                    themselves
                    from those who target them with hatred or violence. In essence, they democratize the
                    ability to resist
                    aggression or coercion, and protect personal autonomy.
                </p>

                <p>
                    The simulation above demonstrates this principle in action. When law-abiding citizens are disarmed,
                    they become dependent on the State for protection‚Äîa protection that may not arrive in time. When
                    they retain their natural right to self-defense, they can protect themselves, their families, and
                    their communities effectively and immediately.
                </p>
            </div>
        </div>
    </div>

    <script>
        class SelfDefenseSimulator {
            constructor() {
                this.currentScenario = 'unarmed';
                this.gameActive = false;
                this.threatDistance = 100; // feet
                this.timeElapsed = 0;
                this.policeResponseTime = 8; // minutes
                this.threatLevel = 'medium';
                this.location = 'home';
                this.gameInterval = null;
                this.outcomeReached = false;

                this.init();
            }

            init() {
                this.updateDisplay();
                this.resetSimulation();
            }

            selectScenario(scenario) {
                this.currentScenario = scenario;

                // Update UI
                document.getElementById('unarmedScenario').classList.toggle('active', scenario === 'unarmed');
                document.getElementById('armedScenario').classList.toggle('active', scenario === 'armed');

                // Show/hide defend button
                const defendButton = document.getElementById('defendButton');
                defendButton.style.display = scenario === 'armed' ? 'block' : 'none';

                // Update citizen appearance
                const citizen = document.getElementById('citizen');
                citizen.classList.toggle('armed', scenario === 'armed');

                this.resetSimulation();
            }

            startGame() {
                this.gameActive = true;
                this.outcomeReached = false;
                this.timeElapsed = 0;
                this.threatDistance = 100;

                // Enable action buttons
                const buttons = document.querySelectorAll('.action-button');
                buttons.forEach(btn => btn.disabled = false);

                // Start game loop
                this.gameInterval = setInterval(() => {
                    this.updateGame();
                }, 100); // Update every 100ms

                this.updateStatus("Choose your action quickly! The threat is approaching!");
            }

            updateGame() {
                if (!this.gameActive || this.outcomeReached) return;

                this.timeElapsed += 0.1;

                // Threat approaches at different speeds based on threat level
                let approachSpeed = 2; // feet per second
                switch (this.threatLevel) {
                    case 'low': approachSpeed = 1.5; break;
                    case 'medium': approachSpeed = 2; break;
                    case 'high': approachSpeed = 3; break;
                }

                this.threatDistance -= approachSpeed * 0.1;

                // Update display
                document.getElementById('threatDistance').textContent = Math.max(0, Math.round(this.threatDistance));
                document.getElementById('timeElapsed').textContent = this.timeElapsed.toFixed(1);

                // Update threat position visually
                const threat = document.getElementById('threat');
                const maxDistance = 300; // pixels
                const position = Math.max(30, maxDistance + ((100 - this.threatDistance) / 50) * (maxDistance - 30));
                threat.style.right = position + 'px';

                // Check if threat reaches victim
                if (this.threatDistance <= 0 && !this.outcomeReached) {
                    this.endGame(false, "The attacker reached you before you could react effectively!", "failure");
                }
            }

            callPolice() {
                if (!this.gameActive || this.outcomeReached) return;

                this.disableButtons();
                this.updateStatus("Calling the police...They are on their way, but response time is " + this.policeResponseTime + " minutes!");

                // Show police car animation
                const policeCar = document.getElementById('policeCar');
                setTimeout(() => {
                    policeCar.classList.add('arriving');
                }, 1000);

                // Police arrive after response time
                setTimeout(() => {
                    if (!this.outcomeReached) {
                        const survived = this.threatDistance > 0;
                        if (survived) {
                            this.endGame(true, "Police arrived and arrested the intruder!", "success");
                        } else {
                            this.endGame(false, "Police arrived too late. The attack had already occurred.", "failure");
                        }
                    }
                }, this.policeResponseTime * 60 * 100); // Convert minutes to game time
            }

            hideAndWait() {
                if (!this.gameActive || this.outcomeReached) return;

                this.disableButtons();
                this.updateStatus("Hiding and hoping the intruder doesn't find you...");

                // Hiding has variable success rate based on threat level
                let successRate = 0.3;
                switch (this.threatLevel) {
                    case 'low': successRate = 0.6; break;
                    case 'medium': successRate = 0.3; break;
                    case 'high': successRate = 0.1; break;
                }

                setTimeout(() => {
                    if (!this.outcomeReached) {
                        const success = Math.random() < successRate;
                        if (success) {
                            this.endGame(true, "You successfully hid until the intruder left!", "warning");
                        } else {
                            this.endGame(false, "The intruder found your hiding spot!", "failure");
                        }
                    }
                }, 3000);
            }

            tryNegotiation() {
                if (!this.gameActive || this.outcomeReached) return;

                this.disableButtons();
                this.updateStatus("Attempting to negotiate with the intruder...");

                // Negotiation has very low success rate with violent criminals
                let successRate = 0.15;
                switch (this.threatLevel) {
                    case 'low': successRate = 0.4; break;
                    case 'medium': successRate = 0.15; break;
                    case 'high': successRate = 0.05; break;
                }

                setTimeout(() => {
                    if (!this.outcomeReached) {
                        const success = Math.random() < successRate;
                        if (success) {
                            this.endGame(true, "The intruder was convinced to leave without violence!", "warning");
                        } else {
                            this.endGame(false, "Negotiation failed. The intruder became more aggressive!", "failure");
                        }
                    }
                }, 2000);
            }

            defendYourself() {
                if (!this.gameActive || this.outcomeReached) return;

                this.disableButtons();
                this.updateStatus("Defending yourself with your firearm!");

                // Armed defense has very high success rate
                const threat = document.getElementById('threat');
                threat.classList.add('neutralized');

                setTimeout(() => {
                    if (!this.outcomeReached) {
                        // 95%+ success rate for armed defense
                        const success = Math.random() < 0.95;
                        if (success) {
                            this.endGame(true, "Threat neutralized! Your firearm stopped the attack immediately.", "success");
                        } else {
                            this.endGame(false, "Despite being armed, the situation escalated beyond control.", "failure");
                        }
                    }
                }, 1000);
            }

            endGame(success, message, type) {
                this.outcomeReached = true;
                this.gameActive = false;
                clearInterval(this.gameInterval);

                this.updateStatus(message);

                // Show outcome stats
                const outcomeStats = document.getElementById('outcomeStats');
                outcomeStats.style.display = 'block';

                document.getElementById('responseTime').textContent = this.timeElapsed.toFixed(1) + 's';
                document.getElementById('outcome').textContent = success ? 'Survived' : 'Injured/Killed';
                document.getElementById('outcome').className = 'stat-value ' + (success ? 'success' : 'failure');

                // Calculate survival probability based on scenario
                let survivalRate = '0%';
                if (this.currentScenario === 'armed') {
                    survivalRate = success ? '95%' : '5%';
                } else {
                    survivalRate = success ? '25%' : '75%';
                }
                document.getElementById('survivalRate').textContent = survivalRate;
                document.getElementById('survivalRate').className = 'stat-value ' + (success ? 'success' : 'failure');

                // Show reset button
                document.getElementById('resetButton').style.display = 'block';
            }

            updateStatus(message) {
                document.getElementById('statusText').textContent = message;
            }

            disableButtons() {
                const buttons = document.querySelectorAll('.action-button');
                buttons.forEach(btn => btn.disabled = true);
            }

            resetSimulation() {
                this.gameActive = false;
                this.outcomeReached = false;
                clearInterval(this.gameInterval);

                // Reset visual elements
                const threat = document.getElementById('threat');
                threat.classList.remove('neutralized');
                threat.style.right = '30px';

                const policeCar = document.getElementById('policeCar');
                policeCar.classList.remove('arriving');

                // Reset UI
                document.getElementById('outcomeStats').style.display = 'none';
                document.getElementById('resetButton').style.display = 'none';

                // Reset values
                this.threatDistance = 100;
                this.timeElapsed = 0;
                document.getElementById('threatDistance').textContent = '100';
                document.getElementById('timeElapsed').textContent = '0';

                // Enable buttons
                const buttons = document.querySelectorAll('.action-button');
                buttons.forEach(btn => btn.disabled = false);

                // Update status
                this.updateStatus("A dangerous intruder has broken into your home at night. You have seconds to react. What do you do?");

                // Start new game
                setTimeout(() => this.startGame(), 1000);
            }

            updateThreatLevel() {
                this.threatLevel = document.getElementById('threatLevel').value;
            }

            updateLocation() {
                this.location = document.getElementById('location').value;
            }

            updateResponseTime() {
                this.policeResponseTime = parseInt(document.getElementById('responseTimeSlider').value);
                document.getElementById('responseTimeValue').textContent = this.policeResponseTime;
            }

            updateDisplay() {
                // Update any display elements based on current settings
            }
        }

        // Global functions for HTML onclick handlers
        let simulator;

        function selectScenario(scenario) {
            simulator.selectScenario(scenario);
        }

        function callPolice() {
            simulator.callPolice();
        }

        function hideAndWait() {
            simulator.hideAndWait();
        }

        function tryNegotiation() {
            simulator.tryNegotiation();
        }

        function defendYourself() {
            simulator.defendYourself();
        }

        function resetSimulation() {
            simulator.resetSimulation();
        }

        function updateThreatLevel() {
            simulator.updateThreatLevel();
        }

        function updateLocation() {
            simulator.updateLocation();
        }

        function updateResponseTime() {
            simulator.updateResponseTime();
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            simulator = new SelfDefenseSimulator();
        });
    </script>
</body>

</html>